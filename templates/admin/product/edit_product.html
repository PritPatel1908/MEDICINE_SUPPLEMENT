{% extends 'admin-base.html' %}
{% load static %}
{% block content %}
<main id="main" class="main">
    <div id="success"></div>
    <div class="col">
        <div class="card">
            <div class="card-body">
                <ul class="breadcrumb mt-3">
                    <li class="breadcrumb-item"><a href="{% url 'admin_home' %}">Dashboard</a></li>
                    <li class="breadcrumb-item">Category</li>
                    <li class="breadcrumb-item active">Edit Product</li>
                </ul>
                <form method="POST" enctype="multipart/form-data" id="edit_product" action="{% url 'update_product' %}">
                    {% csrf_token %}
                    <img id="prev" class="mb-2" name="prev" src="/{{product.product_img}}" height="200" width="150" alt="" />
                    <input type="text" class="form-control d-none" id="prev_img" name="prev_img" value="{{product.product_img}}" disabled>
                    <div class="mb-3">
                        <label for="product_id" class="form-label">Product Id :- </label>
                        <input type="text" class="form-control" id="product_id" name="product_id" value="{{product.product_id}}" disabled>
                    </div>
                    <div class="mb-3">
                        <label for="product_name" class="form-label">Product Name :- </label>
                        <input type="text" class="form-control" id="product_name" name="product_name" value="{{product.product_name}}">
                    </div>
                    <div class="mb-3">
                        <label for="product_description" class="form-label">Product Description :- </label>
                        <textarea class="form-control"  name="product_description" id="product_description" rows="5">{{product.product_description}}</textarea>
                    </div>
                    <div class="mb-3">
                        <label for="product_price" class="form-label">Product Price :- </label>
                        <input type="number" class="form-control" id="product_price" name="product_price" value="{{product.product_price}}">
                    </div>
                    <div class="mb-3">
                        <label for="product_discount_price" class="form-label">Product Discount Price :- </label>
                        <input type="number" class="form-control" id="product_discount_price" name="product_discount_price" value="{{product.product_discount_price}}">
                    </div>
                    <div class="mb-3">
                        <label for="product_quantity" class="form-label">Product Quantity :- </label>
                        <input type="number" class="form-control" id="product_quantity" name="product_quantity" value="{{product.product_quantity}}">
                    </div>
                    <div class="mb-3">
                        <label for="product_expirydate" class="form-label">Product Expirydate :- </label>
                        <input type="date" class="form-control" id="product_expirydate" name="product_expirydate" value="{{product.product_expirydate|date:'Y-m-d'}}">
                    </div>
                    <div class="mb-3">
                        <label for="product_weight" class="form-label">Product Weight :- </label>
                        <input type="number" class="form-control" id="product_weight" name="product_weight" value="{{product.product_weight}}">
                    </div>
                    <div class="mb-3">
                        <label for="product_madein" class="form-label">Product Made In :- </label>
                        <select class="form-control mb-3" name="product_madein" id="product_madein">
                            <option disabled selected>Select Made In State</option>
                            <option value="Afghanistan" {% if product.product_madein == "Afghanistan" %} selected {% endif %}>Afghanistan</option>
                            <option value="Austria" {% if product.product_madein == "Austria" %} selected {% endif %}>Austria</option>
                            <option value="Bangladesh" {% if product.product_madein == "Bangladesh" %} selected {% endif %}>Bangladesh</option>
                            <option value="Belgium" {% if product.product_madein == "Belgium" %} selected {% endif %}>Belgium</option>
                            <option value="Brazil" {% if product.product_madein == "Brazil" %} selected {% endif %}>Brazil</option>
                            <option value="Canada" {% if product.product_madein == "Canada" %} selected {% endif %}>Canada</option>
                            <option value="Central African Republic" {% if product.product_madein == "Central African Republic" %} selected {% endif %}>Central African Republic</option>
                            <option value="Central American Federation" {% if product.product_madein == "Central American Federation" %} selected {% endif %}>Central American Federation</option>
                            <option value="China" {% if product.product_madein == "China" %} selected {% endif %}>China</option>
                            <option value="Colombia" {% if product.product_madein == "Colombia" %} selected {% endif %}>Colombia</option>
                            <option value="East Germany" {% if product.product_madein == "East Germany" %} selected {% endif %}>East Germany</option>
                            <option value="Egypt" {% if product.product_madein == "Egypt" %} selected {% endif %}>Egypt</option>
                            <option value="Finland" {% if product.product_madein == "Finland" %} selected {% endif %}>Finland</option>
                            <option value="France" {% if product.product_madein == "France" %} selected {% endif %}>France</option>
                            <option value="Germany" {% if product.product_madein == "Germany" %} selected {% endif %}>Germany</option>
                            <option value="India" {% if product.product_madein == "India" %} selected {% endif %}>India</option>
                            <option value="Indonesia" {% if product.product_madein == "Indonesia" %} selected {% endif %}>Indonesia</option>
                            <option value="Iran" {% if product.product_madein == "Iran" %} selected {% endif %}>Iran</option>
                            <option value="Japan" {% if product.product_madein == "Japan" %} selected {% endif %}>Japan</option>
                            <option value="Korea" {% if product.product_madein == "Korea" %} selected {% endif %}>Korea</option>
                            <option value="Malaysia" {% if product.product_madein == "Malaysia" %} selected {% endif %}>Malaysia</option>
                            <option value="Mexico" {% if product.product_madein == "Mexico" %} selected {% endif %}>Mexico</option>
                            <option value="Nepal" {% if product.product_madein == "Nepal" %} selected {% endif %}>Nepal</option>
                            <option value="New Zealand" {% if product.product_madein == "New Zealand" %} selected {% endif %}>New Zealand</option>
                            <option value="Russia" {% if product.product_madein == "Russia" %} selected {% endif %}>Russia</option>
                            <option value="South Africa" {% if product.product_madein == "South Africa" %} selected {% endif %}>South Africa</option>
                            <option value="United Kingdom" {% if product.product_madein == "United Kingdom" %} selected {% endif %}>United Kingdom</option>
                            <option value="Other" {% if product.product_madein == "Other" %} selected {% endif %}>Other</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="product_advantage" class="form-label">Product Advantage :- </label>
                        <textarea class="form-control"  name="product_advantage" id="product_advantage" rows="5">{{product.product_advantage}}</textarea>
                    </div>
                    <div class="mb-3">
                        <label for="product_disadvantage" class="form-label">Product Disadvantage :- </label>
                        <textarea class="form-control"  name="product_disadvantage" id="product_disadvantage" rows="5">{{product.product_disadvantage}}</textarea>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Select Prescription Status :- </label>
                        {% if product.product_prescription_status == 0 %}
                            <select class="form-control mb-3" name="product_prescription_status" id="product_prescription_status" value="{{product.product_prescription_status}}">
                                <option disabled selected>Select Prescription Status</option>
                                <option value="0" selected>Prescription Is Required</option>
                                <option value="1">Prescription Is Not Required</option>
                            </select>
                        {% elif product.product_prescription_status == 1 %}
                            <select class="form-control mb-3" name="product_prescription_status" id="product_prescription_status" value="{{product.product_prescription_status}}">
                                <option disabled selected>Select Prescription Status</option>
                                <option value="0">Prescription Is Required</option>
                                <option value="1" selected>Prescription Is Not Required</option>
                            </select>
                        {% else %}
                            <select class="form-control mb-3" name="product_prescription_status" id="product_prescription_status" value="{{product.product_prescription_status}}">
                                <option disabled selected>Select Prescription Status</option>
                                <option value="0">Prescription Is Required</option>
                                <option value="1">Prescription Is Not Required</option>
                            </select>
                        {% endif %}
                    </div>
                    <div class="mb-3">
                        <label for="company_id" class="form-label">Product Company :- </label>
                        <select class="form-control mb-3" name="company_id" id="company_id">
                            <option disabled selected>Select Product Company</option>
                            {% for c in company %}
                                <option value="{{c.company_id}}" {% if c.company_id == product.company_id %} selected {% endif %}>{{c.company_name}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="subcategory_id" class="form-label">Product Category :- </label>
                        <select class="form-control mb-3" name="subcategory_id" id="subcategory_id">
                            <option disabled selected>Select Product Category</option>
                            {% for s in subcategory %}
                            <option value="{{s.subcategory_id}}" {% if s.subcategory_id == product.subcategory_id %} selected {% endif %}>{{s.subcategory_name}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="product_image" class="form-label">Product Image :- </label>
                        <input type="file" class="form-control" id="product_image" name="product_image" onchange="readURL(this);">
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary" name="edit_product">Update Product</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>
<script>
    function readURL(input) {
        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#prev').attr('src', e.target.result).width(150).height(200);
            };
            reader.readAsDataURL(input.files[0]);
            $(window).scrollTop(0);
    }
}
</script>
{% endblock  %}